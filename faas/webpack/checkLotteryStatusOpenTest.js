exports.main = (function(e) {
  var t = {};
  function r(n) {
    if (t[n]) return t[n].exports;
    var i = (t[n] = { i: n, l: !1, exports: {} });
    return e[n].call(i.exports, i, i.exports, r), (i.l = !0), i.exports;
  }
  return (
    (r.m = e),
    (r.c = t),
    (r.d = function(e, t, n) {
      r.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: n });
    }),
    (r.r = function(e) {
      "undefined" != typeof Symbol &&
        Symbol.toStringTag &&
        Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }),
        Object.defineProperty(e, "__esModule", { value: !0 });
    }),
    (r.t = function(e, t) {
      if ((1 & t && (e = r(e)), 8 & t)) return e;
      if (4 & t && "object" == typeof e && e && e.__esModule) return e;
      var n = Object.create(null);
      if (
        (r.r(n),
        Object.defineProperty(n, "default", { enumerable: !0, value: e }),
        2 & t && "string" != typeof e)
      )
        for (var i in e)
          r.d(
            n,
            i,
            function(t) {
              return e[t];
            }.bind(null, i)
          );
      return n;
    }),
    (r.n = function(e) {
      var t =
        e && e.__esModule
          ? function() {
              return e.default;
            }
          : function() {
              return e;
            };
      return r.d(t, "a", t), t;
    }),
    (r.o = function(e, t) {
      return Object.prototype.hasOwnProperty.call(e, t);
    }),
    (r.p = ""),
    r((r.s = 8))
  );
})({
  0: function(e, t, r) {
    "use strict";
    r.d(t, "c", function() {
      return n;
    }),
      r.d(t, "d", function() {
        return i;
      }),
      r.d(t, "a", function() {
        return o;
      }),
      r.d(t, "b", function() {
        return s;
      });
    const n = {
        GET_LOTTERY_FAILED: "GET_LOTTERY_FAILED",
        OUT_OF_LUCKY_NUM: "OUT_OF_LUCKY_NUM"
      },
      i = {
        USER_LOTTERY_RECORD: 81892,
        LOTTERY: 81873,
        ERROR: 83510,
        CONFIG: 83587,
        BALANCE_LUCKY_RECORD: 83371
      },
      o = "5d7917899d8da5229c037105",
      s = {
        HONHBAO_RATIO: 100,
        ATTEND_LOTTERY_COST: 1,
        ONE_LUCKY_NUM_WEIGHT: 2,
        GET_MORE_REDUCE_LUCKY_NUM: -10,
        DEFAULT_URL:
          "https://cloud-minapp-29726.cloud.ifanrusercontent.com/1i5h6hpru0CZ8tVP.png",
        LOTTERY_PRIZE_LIST: [9.9, 16.8, 33.3, 51.8, 66.6, 86.8, 88.8, 99.9],
        LOTTERY_NUM_PEOPLE: [1e3, 1500, 3500, 5e3, 6e3, 8e3, 8e3, 9e3],
        PRIZE_COLORS: [1, 0, 0, 0, 0, 0, 0, 0],
        PLANS: ["红包95个/福袋100个", "红包97个/福袋50个", "红包98个/福袋25个"],
        PLANS_LUCKY_PACKAGE: [100, 50, 25],
        PLANS_LOTTERY_PACKAGE: [95, 97, 98],
        LUCKY_RATIO_OPEN: 100,
        LUCKY_RATIO_SUCCESS: 1e3,
        LUCKY_RATIO_LUCKY_PACKAGE: 10,
        LUCKY_RATIO_INVITATION: 100,
        LUCKY_RATIO_INVITATION_OPEN: 10,
        MAX_SELECTED: 8,
        TAGS: [
          "人工智能",
          "商业管理",
          "化妆品",
          "亲子教育",
          "科技",
          "互联网",
          "旅游",
          "美食",
          "动漫",
          "程序开发",
          "微商",
          "自由职业",
          "健身",
          "篮球",
          "足球",
          "购物",
          "翻译",
          "英语",
          "脱口秀",
          "美剧",
          "音乐",
          "吉他",
          "摇滚",
          "阿拉贝卡",
          "区块链",
          "A股",
          "美股",
          "港股",
          "美女",
          "帅哥",
          "模特",
          "腔调",
          "北上广深",
          "来自农村",
          "二三四线",
          "火星",
          "60后",
          "70后",
          "80后",
          "90后"
        ],
        TAG_FLAGS: [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        DEFAULT_TAG_ITEMS: [
          "80后",
          "A股",
          "微商",
          "足球",
          "音乐",
          "亲子教育",
          "美食",
          "美女"
        ]
      };
  },
  17: function(e, t, r) {
    "use strict";
    r.r(t);
    var n = r(0);
    const i = new wx.BaaS.TableObject(n.d.USER_LOTTERY_RECORD),
      o = new wx.BaaS.TableObject(n.d.LOTTERY),
      s = new wx.BaaS.TableObject(n.d.CONFIG);
    new wx.BaaS.TableObject(n.d.ERROR),
      new wx.BaaS.User(),
      new wx.BaaS.TableObject(n.d.BALANCE_LUCKY_RECORD);
    var u = r(3);
    async function c(e, t) {
      console.log(`checkLotteryStatus - event: ${e}`);
      try {
        let e = (await l()).data.objects;
        if (
          (console.log(`openedLotteries: ${JSON.stringify(e.map(e => e.id))}`),
          e)
        ) {
          let r = (await s.get(n.a)).data;
          for (let t in e) {
            let i = e[t],
              s = await a(i.id);
            console.log(`getAttendeesCount: ${s}`);
            Math.round(Date.parse(i.open_date) / 1e3),
              Math.round(new Date() / 1e3);
            if (s >= i.open_people_num) {
              console.log(`开奖 - lottery.id: ${i.id}`);
              let e = o.getWithoutData(i.id);
              e.set("status", 3), await e.update();
              let t = r.plans_lottery_package[i.plan_index],
                s = h.slice(0, t),
                c = Number(Object(u.b)(i.total_prize / n.b.HONHBAO_RATIO));
              await f(s, i.id, 1, c);
              let a = r.plans_lucky_package[i.plan_index],
                l = d.slice(0, a);
              await f(l, i.id, 2, i.lucky_num_per);
            } else i.open_people_num;
          }
          t(null, "success");
        } else t(n.c.GET_LOTTERY_FAILED);
      } catch (e) {
        t(e);
      }
    }
    r.d(t, "default", function() {
      return c;
    }),
      r.d(t, "getAttendeesCount", function() {
        return a;
      }),
      r.d(t, "getOpenedLottery", function() {
        return l;
      }),
      r.d(t, "LUCKY_SEED_HONGBAO", function() {
        return h;
      }),
      r.d(t, "LUCKY_SEED_FUDAI", function() {
        return d;
      });
    const f = async (e, t, r, n) => {
      let s = [],
        u = new wx.BaaS.Query();
      u.compare("lottery", "=", o.getWithoutData(t));
      let c = (await i
        .setQuery(u)
        .offset(0)
        .limit(1e3)
        .orderBy("-weight")
        .find()).data.objects;
      for (let t = 0; t < e.length; t++) e[t] < c.length && s.push(c[e[t]]);
      let f = s.map(e => e.id);
      if (f.length <= 0) return;
      let a = new wx.BaaS.Query();
      a.in("id", f),
        a.compare("lottery_result", "=", 0),
        a.compare("lottery", "=", o.getWithoutData(t));
      let l = i.getWithoutData(u);
      return (
        1 === r ? l.set("balance", n) : l.set("lucky_num", n),
        l.set("lottery_result", r),
        l.update()
      );
    };
    async function a(e) {
      let t = new wx.BaaS.Query();
      return (
        t.compare("lottery", "=", o.getWithoutData(e)), i.setQuery(t).count()
      );
    }
    async function l() {
      let e = new wx.BaaS.Query();
      return (
        e.compare("status", "=", 2),
        o
          .setQuery(e)
          .limit(10)
          .find()
      );
    }
    const h = [
        0,
        1,
        2,
        3,
        5,
        6,
        7,
        8,
        9,
        10,
        12,
        16,
        18,
        20,
        22,
        26,
        28,
        30,
        32,
        36,
        38,
        40,
        42,
        46,
        48,
        50,
        52,
        56,
        58,
        60,
        62,
        66,
        68,
        70,
        72,
        78,
        80,
        81,
        82,
        83,
        85,
        86,
        87,
        88,
        89,
        90,
        92,
        96,
        99,
        100,
        102,
        106,
        108,
        110,
        112,
        116,
        118,
        120,
        122,
        126,
        128,
        150,
        152,
        156,
        158,
        160,
        162,
        166,
        168,
        170,
        172,
        176,
        178,
        180,
        182,
        186,
        188,
        200,
        202,
        206,
        208,
        510,
        512,
        516,
        518,
        555,
        666,
        777,
        888,
        610,
        612,
        616,
        618,
        190,
        192,
        196,
        199,
        130,
        132,
        136,
        138
      ],
      d = [
        4,
        11,
        13,
        14,
        15,
        17,
        19,
        21,
        23,
        24,
        25,
        27,
        29,
        31,
        33,
        34,
        35,
        37,
        39,
        41,
        43,
        44,
        45,
        47,
        49,
        51,
        53,
        54,
        55,
        57,
        59,
        61,
        63,
        64,
        65,
        67,
        69,
        71,
        73,
        74,
        76,
        79,
        84,
        91,
        93,
        94,
        95,
        97,
        98,
        101,
        103,
        104,
        105,
        107,
        109,
        111,
        113,
        114,
        115,
        117,
        119,
        121,
        123,
        124,
        125,
        127,
        129,
        131,
        133,
        134,
        135,
        137,
        139,
        140,
        141,
        142,
        143,
        144,
        145,
        146,
        147,
        148,
        149,
        151,
        153,
        154,
        155,
        157,
        159,
        161,
        163,
        164,
        165,
        167,
        169,
        171,
        173,
        174,
        177,
        179,
        181,
        183,
        184,
        185,
        187,
        189,
        191,
        193,
        194,
        195,
        197,
        201,
        203,
        205,
        207,
        209,
        211,
        212,
        213,
        214,
        215,
        216,
        217,
        218,
        219,
        220,
        221,
        222,
        223,
        224,
        225,
        226,
        227,
        228
      ];
  },
  2: function(e, t, r) {
    var n;
    !(function(i) {
      "use strict";
      var o,
        s = 20,
        u = 1,
        c = 1e6,
        f = -7,
        a = 21,
        l = "[big.js] ",
        h = l + "Invalid ",
        d = h + "decimal places",
        p = h + "rounding mode",
        _ = {},
        E = void 0,
        w = /^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;
      function O(e, t, r, n) {
        var i = e.c,
          o = e.e + t + 1;
        if (o < i.length) {
          if (1 === r) n = i[o] >= 5;
          else if (2 === r)
            n =
              i[o] > 5 ||
              (5 == i[o] && (n || o < 0 || i[o + 1] !== E || 1 & i[o - 1]));
          else if (3 === r) n = n || !!i[0];
          else if (((n = !1), 0 !== r)) throw Error(p);
          if (o < 1)
            (i.length = 1), n ? ((e.e = -t), (i[0] = 1)) : (i[0] = e.e = 0);
          else {
            if (((i.length = o--), n))
              for (; ++i[o] > 9; ) (i[o] = 0), o-- || (++e.e, i.unshift(1));
            for (o = i.length; !i[--o]; ) i.pop();
          }
        } else if (r < 0 || r > 3 || r !== ~~r) throw Error(p);
        return e;
      }
      function g(e, t, r, n) {
        var i,
          o,
          s = e.constructor,
          u = !e.c[0];
        if (r !== E) {
          if (r !== ~~r || r < (3 == t) || r > c)
            throw Error(3 == t ? h + "precision" : d);
          for (
            r = n - (e = new s(e)).e,
              e.c.length > ++n && O(e, r, s.RM),
              2 == t && (n = e.e + r + 1);
            e.c.length < n;

          )
            e.c.push(0);
        }
        if (
          ((i = e.e),
          (r = (o = e.c.join("")).length),
          2 != t && (1 == t || (3 == t && n <= i) || i <= s.NE || i >= s.PE))
        )
          o =
            o.charAt(0) +
            (r > 1 ? "." + o.slice(1) : "") +
            (i < 0 ? "e" : "e+") +
            i;
        else if (i < 0) {
          for (; ++i; ) o = "0" + o;
          o = "0." + o;
        } else if (i > 0)
          if (++i > r) for (i -= r; i--; ) o += "0";
          else i < r && (o = o.slice(0, i) + "." + o.slice(i));
        else r > 1 && (o = o.charAt(0) + "." + o.slice(1));
        return e.s < 0 && (!u || 4 == t) ? "-" + o : o;
      }
      (_.abs = function() {
        var e = new this.constructor(this);
        return (e.s = 1), e;
      }),
        (_.cmp = function(e) {
          var t,
            r = this,
            n = r.c,
            i = (e = new r.constructor(e)).c,
            o = r.s,
            s = e.s,
            u = r.e,
            c = e.e;
          if (!n[0] || !i[0]) return n[0] ? o : i[0] ? -s : 0;
          if (o != s) return o;
          if (((t = o < 0), u != c)) return (u > c) ^ t ? 1 : -1;
          for (s = (u = n.length) < (c = i.length) ? u : c, o = -1; ++o < s; )
            if (n[o] != i[o]) return (n[o] > i[o]) ^ t ? 1 : -1;
          return u == c ? 0 : (u > c) ^ t ? 1 : -1;
        }),
        (_.div = function(e) {
          var t = this,
            r = t.constructor,
            n = t.c,
            i = (e = new r(e)).c,
            o = t.s == e.s ? 1 : -1,
            s = r.DP;
          if (s !== ~~s || s < 0 || s > c) throw Error(d);
          if (!i[0]) throw Error("[big.js] Division by zero");
          if (!n[0]) return new r(0 * o);
          var u,
            f,
            a,
            l,
            h,
            p = i.slice(),
            _ = (u = i.length),
            w = n.length,
            g = n.slice(0, u),
            T = g.length,
            A = e,
            R = (A.c = []),
            v = 0,
            L = s + (A.e = t.e - e.e) + 1;
          for (A.s = o, o = L < 0 ? 0 : L, p.unshift(0); T++ < u; ) g.push(0);
          do {
            for (a = 0; a < 10; a++) {
              if (u != (T = g.length)) l = u > T ? 1 : -1;
              else
                for (h = -1, l = 0; ++h < u; )
                  if (i[h] != g[h]) {
                    l = i[h] > g[h] ? 1 : -1;
                    break;
                  }
              if (!(l < 0)) break;
              for (f = T == u ? i : p; T; ) {
                if (g[--T] < f[T]) {
                  for (h = T; h && !g[--h]; ) g[h] = 9;
                  --g[h], (g[T] += 10);
                }
                g[T] -= f[T];
              }
              for (; !g[0]; ) g.shift();
            }
            (R[v++] = l ? a : ++a),
              g[0] && l ? (g[T] = n[_] || 0) : (g = [n[_]]);
          } while ((_++ < w || g[0] !== E) && o--);
          return (
            R[0] || 1 == v || (R.shift(), A.e--),
            v > L && O(A, s, r.RM, g[0] !== E),
            A
          );
        }),
        (_.eq = function(e) {
          return !this.cmp(e);
        }),
        (_.gt = function(e) {
          return this.cmp(e) > 0;
        }),
        (_.gte = function(e) {
          return this.cmp(e) > -1;
        }),
        (_.lt = function(e) {
          return this.cmp(e) < 0;
        }),
        (_.lte = function(e) {
          return this.cmp(e) < 1;
        }),
        (_.minus = _.sub = function(e) {
          var t,
            r,
            n,
            i,
            o = this,
            s = o.constructor,
            u = o.s,
            c = (e = new s(e)).s;
          if (u != c) return (e.s = -c), o.plus(e);
          var f = o.c.slice(),
            a = o.e,
            l = e.c,
            h = e.e;
          if (!f[0] || !l[0])
            return l[0] ? ((e.s = -c), e) : new s(f[0] ? o : 0);
          if ((u = a - h)) {
            for (
              (i = u < 0) ? ((u = -u), (n = f)) : ((h = a), (n = l)),
                n.reverse(),
                c = u;
              c--;

            )
              n.push(0);
            n.reverse();
          } else
            for (
              r = ((i = f.length < l.length) ? f : l).length, u = c = 0;
              c < r;
              c++
            )
              if (f[c] != l[c]) {
                i = f[c] < l[c];
                break;
              }
          if (
            (i && ((n = f), (f = l), (l = n), (e.s = -e.s)),
            (c = (r = l.length) - (t = f.length)) > 0)
          )
            for (; c--; ) f[t++] = 0;
          for (c = t; r > u; ) {
            if (f[--r] < l[r]) {
              for (t = r; t && !f[--t]; ) f[t] = 9;
              --f[t], (f[r] += 10);
            }
            f[r] -= l[r];
          }
          for (; 0 === f[--c]; ) f.pop();
          for (; 0 === f[0]; ) f.shift(), --h;
          return f[0] || ((e.s = 1), (f = [(h = 0)])), (e.c = f), (e.e = h), e;
        }),
        (_.mod = function(e) {
          var t,
            r = this,
            n = r.constructor,
            i = r.s,
            o = (e = new n(e)).s;
          if (!e.c[0]) throw Error("[big.js] Division by zero");
          return (
            (r.s = e.s = 1),
            (t = 1 == e.cmp(r)),
            (r.s = i),
            (e.s = o),
            t
              ? new n(r)
              : ((i = n.DP),
                (o = n.RM),
                (n.DP = n.RM = 0),
                (r = r.div(e)),
                (n.DP = i),
                (n.RM = o),
                this.minus(r.times(e)))
          );
        }),
        (_.plus = _.add = function(e) {
          var t,
            r = this,
            n = r.constructor,
            i = r.s,
            o = (e = new n(e)).s;
          if (i != o) return (e.s = -o), r.minus(e);
          var s = r.e,
            u = r.c,
            c = e.e,
            f = e.c;
          if (!u[0] || !f[0]) return f[0] ? e : new n(u[0] ? r : 0 * i);
          if (((u = u.slice()), (i = s - c))) {
            for (
              i > 0 ? ((c = s), (t = f)) : ((i = -i), (t = u)), t.reverse();
              i--;

            )
              t.push(0);
            t.reverse();
          }
          for (
            u.length - f.length < 0 && ((t = f), (f = u), (u = t)),
              i = f.length,
              o = 0;
            i;
            u[i] %= 10
          )
            o = ((u[--i] = u[i] + f[i] + o) / 10) | 0;
          for (o && (u.unshift(o), ++c), i = u.length; 0 === u[--i]; ) u.pop();
          return (e.c = u), (e.e = c), e;
        }),
        (_.pow = function(e) {
          var t = this,
            r = new t.constructor(1),
            n = r,
            i = e < 0;
          if (e !== ~~e || e < -1e6 || e > 1e6) throw Error(h + "exponent");
          for (i && (e = -e); 1 & e && (n = n.times(t)), (e >>= 1); )
            t = t.times(t);
          return i ? r.div(n) : n;
        }),
        (_.round = function(e, t) {
          var r = this.constructor;
          if (e === E) e = 0;
          else if (e !== ~~e || e < -c || e > c) throw Error(d);
          return O(new r(this), e, t === E ? r.RM : t);
        }),
        (_.sqrt = function() {
          var e,
            t,
            r,
            n = this,
            i = n.constructor,
            o = n.s,
            s = n.e,
            u = new i(0.5);
          if (!n.c[0]) return new i(n);
          if (o < 0) throw Error(l + "No square root");
          0 === (o = Math.sqrt(n + "")) || o === 1 / 0
            ? (((t = n.c.join("")).length + s) & 1 || (t += "0"),
              (s = (((s + 1) / 2) | 0) - (s < 0 || 1 & s)),
              (e = new i(
                ((o = Math.sqrt(t)) == 1 / 0
                  ? "1e"
                  : (o = o.toExponential()).slice(0, o.indexOf("e") + 1)) + s
              )))
            : (e = new i(o)),
            (s = e.e + (i.DP += 4));
          do {
            (r = e), (e = u.times(r.plus(n.div(r))));
          } while (r.c.slice(0, s).join("") !== e.c.slice(0, s).join(""));
          return O(e, (i.DP -= 4), i.RM);
        }),
        (_.times = _.mul = function(e) {
          var t,
            r = this,
            n = r.constructor,
            i = r.c,
            o = (e = new n(e)).c,
            s = i.length,
            u = o.length,
            c = r.e,
            f = e.e;
          if (((e.s = r.s == e.s ? 1 : -1), !i[0] || !o[0]))
            return new n(0 * e.s);
          for (
            e.e = c + f,
              s < u && ((t = i), (i = o), (o = t), (f = s), (s = u), (u = f)),
              t = new Array((f = s + u));
            f--;

          )
            t[f] = 0;
          for (c = u; c--; ) {
            for (u = 0, f = s + c; f > c; )
              (u = t[f] + o[c] * i[f - c - 1] + u),
                (t[f--] = u % 10),
                (u = (u / 10) | 0);
            t[f] = u;
          }
          for (u ? ++e.e : t.shift(), c = t.length; !t[--c]; ) t.pop();
          return (e.c = t), e;
        }),
        (_.toExponential = function(e) {
          return g(this, 1, e, e);
        }),
        (_.toFixed = function(e) {
          return g(this, 2, e, this.e + e);
        }),
        (_.toPrecision = function(e) {
          return g(this, 3, e, e - 1);
        }),
        (_.toString = function() {
          return g(this);
        }),
        (_.valueOf = _.toJSON = function() {
          return g(this, 4);
        }),
        ((o = (function e() {
          function t(r) {
            var n = this;
            if (!(n instanceof t)) return r === E ? e() : new t(r);
            r instanceof t
              ? ((n.s = r.s), (n.e = r.e), (n.c = r.c.slice()))
              : (function(e, t) {
                  var r, n, i;
                  if (0 === t && 1 / t < 0) t = "-0";
                  else if (!w.test((t += ""))) throw Error(h + "number");
                  (e.s = "-" == t.charAt(0) ? ((t = t.slice(1)), -1) : 1),
                    (r = t.indexOf(".")) > -1 && (t = t.replace(".", ""));
                  (n = t.search(/e/i)) > 0
                    ? (r < 0 && (r = n),
                      (r += +t.slice(n + 1)),
                      (t = t.substring(0, n)))
                    : r < 0 && (r = t.length);
                  for (i = t.length, n = 0; n < i && "0" == t.charAt(n); ) ++n;
                  if (n == i) e.c = [(e.e = 0)];
                  else {
                    for (; i > 0 && "0" == t.charAt(--i); );
                    for (e.e = r - n - 1, e.c = [], r = 0; n <= i; )
                      e.c[r++] = +t.charAt(n++);
                  }
                })(n, r),
              (n.constructor = t);
          }
          return (
            (t.prototype = _),
            (t.DP = s),
            (t.RM = u),
            (t.NE = f),
            (t.PE = a),
            (t.version = "5.2.2"),
            t
          );
        })()).default = o.Big = o),
        void 0 ===
          (n = function() {
            return o;
          }.call(t, r, t, e)) || (e.exports = n);
    })();
  },
  3: function(e, t, r) {
    "use strict";
    r.d(t, "a", function() {
      return o;
    }),
      r.d(t, "b", function() {
        return s;
      });
    var n = r(2),
      i = r.n(n);
    function o() {
      var e = Date.parse(new Date());
      return (e /= 1e3), new Date(1e3 * (e + 86400)).toISOString();
    }
    const s = e => new i.a(e).toFixed(3);
  },
  8: function(e, t, r) {
    e.exports = r(17);
  }
}).default;
