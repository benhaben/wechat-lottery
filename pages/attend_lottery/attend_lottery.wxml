<view class="container__image" style="background-image: url('{{url}}')">
  <view class="container__select-image">
    <view class="container__select-image-icon">
      <van-icon size="35rpx" name="gift"/>
    </view>
    <view>
      <text>{{hash}}</text>
    </view>
  </view>
</view>


<view class="info">
  <view class="info-row">
    <view class="info__row_left">
      <view class="info__row_title">
        总奖：
      </view>
      <view class="info__row_value">
        {{total}}
      </view>
    </view>

    <view class="info__row_right">
      <view class="info__row_value">
        {{dudai_num}} 个
      </view>
      <view class="info__row_title">
        福袋：
      </view>

    </view>
  </view>

  <view class="info-row">
    <view class="info__row_left">
      <view class="info__row_title">
        倒计时：
      </view>
      <view class="info__row_value">
        {{countdownStr}}
      </view>
    </view>

    <view class="info__row_right">
      <view class="info__row_value">
        {{open_people_num}} 人
      </view>
      <view class="info__row_title">
        开奖人数：
      </view>

    </view>
  </view>

  <view class="info-row">
    <view class="info__row_left">
      <image class="avatar" src="{{avatar}}"></image>
      <text>{{nickname}}</text>
    </view>
    <view class="info__row_right">
      发起人
    </view>
  </view>

  <view class="container__tag" wx:if="{{tag_items}}">
    <view class="container__tag_bar">
      <view class="container__tag_title">
        发起人标签：
      </view>
    </view>
    <view class="container__tag_items h-flex flex-row flex-wrap flex-justify-content-center">
      <view class="container__tag_item" wx:for="{{tag_items}}" wx:key="{{index}}">
        {{item}}
      </view>
    </view>
  </view>

  <view class="container__tag" wx:if="{{desc_initiator}}">
    <view class="container__tag_bar">
      <view class="container__tag_title">
        发起人简介：
      </view>
    </view>
    <view class="container__tag_items h-flex flex-row flex-wrap flex-justify-content-center">
      <text>{{desc_initiator}}</text>
    </view>
  </view>

  <view class="container__tag" wx:if="{{pic_data}}">
    <view class="container__tag_bar">
      发起人广告：
    </view>
    <view class="">
      <x-richtext isReadOnly initList="{{pic_data}}"/>
    </view>
  </view>

  <view class="margin30-bottom">
    <view class="weight h-flex flex-row flex-align-center bg-white">
      <view>中奖权重 ：{{weight}}</view>
      <van-icon wx:if="{{status===2}}" name="add" size="60rpx" bind:click="onAddWeight"/>
    </view>

    <view class="container-info">
      <view class="lucky-info">运气值：{{selfLuckyNum}}</view>
      <view class="weight-info">一个运气值，增加两个权重</view>
    </view>

  </view>

  <form report-submit bindsubmit="onAttend" class="action" wx:if="{{status===2}}">
    <view class="action__row">
      <view wx:if="{{!auth}}">
        <button
          class="action__btn circle-border-radius"
          type="warn"
          open-type="getUserInfo"
          form-type="submit"
          bindgetuserinfo="userInfoHandler">
          <text wx:if="{{hasAttended}}">待开奖</text>
          <text wx:else>参与抽奖</text>
        </button>
      </view>

      <button wx:else :loading="attendBtnLoading"
              form-type="submit"
              class="action__btn circle-border-radius"
              type="warn"
              >
        <text wx:if="{{hasAttended}}">待开奖</text>
        <text wx:else>参与抽奖</text>
      </button>
    </view>
    <view class="action__row">
      <view class="action__num" bindtap="onGoToAttendees">
        已有 {{attend_num}} 人参与，查看全部
        <van-icon class="icon" name="arrow"/>
      </view>
    </view>
    <view class="action__row">
      <image class="action__avatar avatar" wx:for="{{attend_avatar_list}}" wx:key="{{index}}" src="{{item}}"></image>
    </view>
  </form>

  <view class="add-lottery" bindtap="goToAddLottery">
    我要发抽奖
    <van-icon class="icon" name="arrow"/>
  </view>

  <view class="share" wx:if="{{status===2}}">
    <button class="share__btn" bindtap="onShare">分享</button>
    <view class="share__tips">
      每邀请一个朋友参与，就可能获得更多运气值和奖励
    </view>
  </view>

  <view class="height150 h-flex flex-justify-content-around" wx:if="{{status===1 && admin}}">
    <view>
      <van-button class="bottom__btn" size="normal" bind:click="onReject">驳回</van-button>
    </view>
    <view>
      <van-button class="bottom__btn" size="normal" bind:click="onApprove" type="primary">通过</van-button>
    </view>
  </view>

</view>


<van-popup show="{{ showSharePopup }}" position="bottom" bind:close="onCloseSharePopup">

  <view class="popup">
    <view class="popup-item">
      <van-button  class="popup-item-btn" icon="share" open-type="share" type="danger"  hairline ></van-button >
      <view>分享</view>
    </view>
    <view class="popup-item">
      <van-button  class="popup-item-btn"  icon="photo-o"  type="danger" bindtap="genPic" hairline ></van-button >
      <view>生成图片</view>
    </view>
  </view>

</van-popup>
